CREATE TABLE "users" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "first_name" varchar(30) NOT NULL,
  "last_name" varchar(40) NOT NULL,
  "name" varchar(40) NOT NULL,
  "email" varchar(60) NOT NULL,
  "password" varchar(40) NOT NULL,
  "age" int NOT NULL
);

CREATE TABLE "courses" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "title" varchar(60) NOT NULL,
  "description" varchar(200) NOT NULL,
  "level" varchar(30) NOT NULL,
  "teacher" varchar(60) NOT NULL,
  "number_classes" int NOT NULL,
  "hours_video" int NOT NULL
);

CREATE TABLE "roles" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" varchar(40) UNIQUE NOT NULL
);

CREATE TABLE "categories" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" varchar(40) UNIQUE NOT NULL
);

CREATE TABLE "subcategories" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" varchar(100) NOT NULL,
  "category_id" int NOT NULL
);

CREATE TABLE "videos" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "title" varchar(40) NOT NULL,
  "url" varchar(200) UNIQUE NOT NULL,
  "duration" varchar(20) NOT NULL,
  "course_id" int NOT NULL
);

CREATE TABLE "users_courses" (
  "user_id" int NOT NULL,
  "course_id" int NOT NULL
);

CREATE TABLE "users_roles" (
  "user_id" int NOT NULL,
  "role_id" int NOT NULL
);

CREATE TABLE "courses_categories_subcategories" (
  "course_id" int NOT NULL,
  "category_id" int NOT NULL,
  "subcategory_id" int NOT NULL
);

ALTER TABLE "users_courses" ADD FOREIGN KEY ("user_id") REFERENCES "users" ("id");

ALTER TABLE "users_courses" ADD FOREIGN KEY ("course_id") REFERENCES "courses" ("id");

ALTER TABLE "users_roles" ADD FOREIGN KEY ("user_id") REFERENCES "users" ("id");

ALTER TABLE "users_roles" ADD FOREIGN KEY ("role_id") REFERENCES "roles" ("id");

ALTER TABLE "videos" ADD FOREIGN KEY ("course_id") REFERENCES "courses" ("id");

ALTER TABLE "courses_categories_subcategories" ADD FOREIGN KEY ("category_id") REFERENCES "categories" ("id");

ALTER TABLE "courses_categories_subcategories" ADD FOREIGN KEY ("course_id") REFERENCES "courses" ("id");

ALTER TABLE "subcategories" ADD FOREIGN KEY ("category_id") REFERENCES "categories" ("id");

ALTER TABLE "courses_categories_subcategories" ADD FOREIGN KEY ("subcategory_id") REFERENCES "subcategories" ("id");


CREATE DATABASE courses_website;

\c courses_website

\i C:\Users\USER\Desktop\courses_website.sql

\dt

\d categories
SELECT * FROM categories;

INSERT INTO categories VALUES(1, 'Desarrollo');
INSERT INTO categories VALUES(2, 'Diseño');
INSERT INTO categories VALUES(3, 'Marketing');

\d courses
SELECT * FROM courses;

INSERT INTO courses VALUES(1, 'Curso de Laravel 9', 'En este curso aprenderás todo lo que necesitas saber de Laravel para obtener un empleo o crear tu emprendimiento digital', 'intermedio', 'Luis Paredes', 5,3);
INSERT INTO courses VALUES(2, 'Curso de React', 'Este curso es en su mayoría Hooks y componentes funcionales pero también incluye componentes basados en clases para que puedas mantener infraestructura existente', 'intermedio', 'Luis Paredes', 14,20);

\d courses_categories_subcategories
SELECT * FROM courses_categories_subcategories;

INSERT INTO courses_categories_subcategories VALUES(1,1,1);
INSERT INTO courses_categories_subcategories VALUES(2,1,1);

\d roles
SELECT * FROM roles;

INSERT INTO roles VALUES(1, 'student');
INSERT INTO roles VALUES(2, 'teacher');
INSERT INTO roles VALUES(3, 'admin');

\d subcategories
SELECT * FROM subcategories;

INSERT INTO subcategories VALUES  (1 , 'Desarrollo Web', 1);
INSERT INTO subcategories VALUES  (2 , 'Desarrollo Movil', 1);
INSERT INTO subcategories VALUES  (3 , 'Testeo de Software', 1)
INSERT INTO subcategories VALUES  (4 , 'Diseño Web', 2);
INSERT INTO subcategories VALUES  (5 , 'Diseño de Juegos',  2);
INSERT INTO subcategories VALUES  (6 , 'Diseño de Modas', 2);
INSERT INTO subcategories VALUES  (7 , 'Marketing Digital', 3);
INSERT INTO subcategories VALUES  (8 , 'Creación de Marca',  3);
INSERT INTO subcategories VALUES  (9 , 'Marketing de Redes Sociales', 3);

\d users
SELECT * FROM users;

INSERT INTO users VALUES  (1, 'Edwin', 'Amaranto', 'EdwinCoder85', 'edwinagemiler17@gmail.com', '12349876',  37);
INSERT INTO users VALUES  (2, 'Lucia', 'Gutierrez', 'LucyUnique', 'lucecita_cat@gmail.com', '9876543',  32);
INSERT INTO users VALUES  (3, 'Yesenia', 'Camach0', 'YessyLoverxx', 'yesisita@gmail.com', '9876543',  34);
INSERT INTO users VALUES  (4, 'Erick', 'Portales', 'ErickPorta', 'erickportales@gmail.com', '1223',  32);
INSERT INTO users VALUES  (5, 'Nelida', 'Villegas', 'ErickPorta', 'nelidavillegas@gmail.com', '1223', 50);

\d users_courses
SELECT * FROM users_courses;

INSERT INTO users_courses VALUES(1,1);
INSERT INTO users_courses VALUES(2,1);
INSERT INTO users_courses VALUES(3,2);
INSERT INTO users_courses VALUES(1,2);

\d users_roles
SELECT * FROM users_roles;

INSERT INTO users_roles VALUES(1,3);
INSERT INTO users_roles VALUES(2,2);
INSERT INTO users_roles VALUES(3,1);
INSERT INTO users_roles VALUES(1,2);
INSERT INTO users_roles VALUES(2,1);

\d videos
SELECT * FROM videos;

INSERT INTO videos VALUES(1, 'Fundamentos de Laravel 9', 'https://www.youtube.com/watch?v=wZYySlQzfvM&list=PLpKWS6gp0jd_xJyvkbDzoMQLQc-qyFQAE', '01:11', 1);
INSERT INTO videos VALUES(2, 'Entorno de desarrollo para Laravel 9 en Windows Laragon', 'https://www.youtube.com/watch?v=-xQpYG2YYxk&list=PLpKWS6gp0jd_xJyvkbDzoMQLQc-qyFQAE&index=2', '07:03', 1);
INSERT INTO videos VALUES(3, 'Explorando la estructura de carpetas', 'https://www.youtube.com/watch?v=-xQpYG2YYxk&list=PLpKWS6gp0jd_xJyvkbDzoMQLQc-qyFQAE&index=4', '05:16', 1);
INSERT INTO videos VALUES(4, 'Introducción a React', 'https://www.youtube.com/watch?v=MPLN1ahXgcs&list=PLvq-jIkSeTUZ5XcUw8fJPTBKEHEKPMTKk', '42:37', 2);
INSERT INTO videos VALUES(5, 'Create React App', 'https://www.youtube.com/watch?v=6rqT8OP-yn0&list=PLvq-jIkSeTUZ5XcUw8fJPTBKEHEKPMTKk&index=4', '41:44', 2);
INSERT INTO videos VALUES(6, 'Sintaxis JSX', 'https://www.youtube.com/watch?v=EH4L-EYt63Y&list=PLvq-jIkSeTUZ5XcUw8fJPTBKEHEKPMTKk&index=7', '26:47', 2);